(()=>{"use strict";var e={927:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(81),a=n.n(r),o=n(645),i=n.n(o),s=n(667),c=n.n(s),d=new URL(n(681),n.b),l=new URL(n(471),n.b),u=i()(a()),g=c()(d),h=c()(l);u.push([e.id,".winner-message {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  z-index: 12;\n  display: none;\n  flex-direction: column;\n  justify-content: center;\n  width: 400px;\n  min-height: 180px;\n  padding: 15px;\n  border-radius: 9px;\n  background-color: rgba(0, 0, 0, 0.9);\n  font-size: 27px;\n  text-align: center;\n  transform: translate(-50%, -50%);\n}\n\n.winner-message__text {\n  margin: 10px 0;\n  text-shadow: 1px 1px 2px #cc0000, 0 0 1em #00aaff, 0 0 0.2em #120a8f;\n}\n\n.winner-message__button {\n  width: 76px;\n  height: 25px;\n  margin: 15px auto;\n  border: none;\n  border-radius: 5px;\n  background-color: rgba(249, 249, 249, 0.8);\n  font-family: inherit;\n  font-size: 20px;\n  color: #202020;\n  cursor: pointer;\n}\n\n.header,\n.main,\n.footer {\n  padding: 0 30px;\n}\n\n.header__logo {\n  margin: 15px 0;\n}\n\n.main {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  min-height: calc(100vh - 127px);\n}\n\n.main__page-change,\n.garage__page-number-change,\n.winners__page-number-change {\n  width: 180px;\n}\n\n.button {\n  width: 76px;\n  height: 25px;\n  margin-right: 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: rgba(249, 249, 249, 0.9);\n  font: inherit;\n  color: #202020;\n  cursor: pointer;\n  transition: 0.5s;\n}\n\n.button:disabled {\n  background-color: rgba(249, 249, 249, 0.3);\n  cursor: inherit;\n}\n\n.button:hover {\n  box-shadow: inset -3em 0 0 0 #b8d2d4, inset 3em 0 0 0 #b8d2d4;\n}\n\n.button:disabled:hover {\n  box-shadow: none;\n}\n\n.button:active {\n  transform: scale(0.9);\n  transition: 0;\n}\n\n.button:disabled:active {\n  transform: none;\n}\n\n.footer {\n  display: flex;\n  margin-top: 10px;\n  padding-bottom: 5px;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 17px;\n}\n\n.footer__copyright::before {\n  content: '©';\n}\n\n.footer__github-link {\n  position: relative;\n  padding-left: 34px;\n  line-height: 50px;\n  color: #f9f9f9;\n  text-decoration: none;\n  transition: 0.5s;\n}\n\n.footer__github-link::before {\n  content: '';\n  position: absolute;\n  top: 7px;\n  left: 1px;\n  width: 30px;\n  height: 30px;\n  background-image: url("+g+");\n  background-size: contain;\n  background-repeat: no-repeat;\n  filter: invert(92%) sepia(100%) saturate(0%) hue-rotate(202deg) brightness(106%) contrast(106%);\n  transition: 0.5s;\n}\n\n.footer__rss-link {\n  width: 121px;\n  height: 45px;\n  background-image: url("+h+");\n  background-size: contain;\n  background-repeat: no-repeat;\n  filter: invert(92%) sepia(100%) saturate(0%) hue-rotate(202deg) brightness(106%) contrast(106%);\n  transition: 0.5s;\n}\n\n.footer__github-link:hover,\n.footer__rss-link:hover {\n  transform: scale(1.05);\n}\n",""]);const m=u},60:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),i=n.n(o)()(a());i.push([e.id,".main__garage,\n.main__winners {\n  margin: 20px 0;\n}\n\n.garage__controller {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  row-gap: 10px;\n  width: fit-content;\n  margin-bottom: 20px;\n  padding: 5px;\n  border: 1px solid #f9f9f94f;\n  border-radius: 5px;\n}\n\n.garage__car-creation,\n.garage__car-update,\n.garage__controller-buttons {\n  display: flex;\n  justify-content: space-between;\n  column-gap: 5px;\n  width: 100%;\n}\n\n.car-creation__name,\n.car-update__name {\n  font: inherit;\n}\n\n.garage__controller .car-creation__button,\n.garage__controller .car-update__button,\n.garage__controller .controller-buttons__race,\n.garage__controller .controller-buttons__reset,\n.garage__controller .controller-buttons__generate-cars {\n  min-width: 76px;\n  min-height: 25px;\n  width: auto;\n  height: auto;\n  margin: 0;\n}\n\n.garage__controller .controller-buttons__generate-cars:hover {\n  box-shadow: inset -5em 0 0 0 #b8d2d4, inset 5em 0 0 0 #b8d2d4;\n}\n\n.garage__controller .controller-buttons__generate-cars:disabled:hover {\n  box-shadow: none;\n}\n\n.garage__page-number {\n  font-size: 18px;\n}\n\n.garage__cars {\n  display: flex;\n  flex-direction: column;\n  row-gap: 10px;\n}\n\n.garage__car {\n  display: flex;\n  flex-direction: column;\n  row-gap: 15px;\n  border-bottom: 2px dotted #f9f9f9;\n}\n\n.garage__drive-buttons-and-car {\n  position: relative;\n  display: flex;\n  align-items: flex-end;\n}\n\n.garage__drive-buttons-and-car .garage__car-start-engine-button,\n.garage__drive-buttons-and-car .garage__car-stop-engine-button {\n  width: 25px;\n  margin-bottom: 10px;\n}\n\n.garage__drive-buttons-and-car .garage__car-start-engine-button {\n  color: #0ca70c;\n}\n\n.garage__drive-buttons-and-car .garage__car-stop-engine-button {\n  color: #ff0000;\n}\n\n.garage__car-image .car-image {\n  width: 65px;\n  height: 28px;\n}\n\n.garage__flag-image {\n  position: absolute;\n  right: 66px;\n  z-index: 5;\n  height: 65px;\n}\n\n.garage__page-number-change {\n  margin-top: 20px;\n}\n",""]);const s=i},545:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),i=n.n(o)()(a());i.push([e.id,".main__winners {\n  display: none;\n}\n\n.cell-heading,\n.cell-content {\n  padding: 5px;\n  border-radius: 2px;\n  text-align: center;\n}\n\n.cell-heading {\n  background-color: rgba(184, 210, 212, 0.6);\n  font-weight: 400;\n}\n\n.cell-content {\n  background-color: rgba(184, 210, 212, 0.1);\n}\n\n.winners__page-number-change {\n  margin-top: 20px;\n}\n\n.table-heading__car-image {\n  width: 55px;\n}\n\n.table-heading__car-name {\n  min-width: 100px;\n}\n\n.table-heading__wins-amount,\n.table-heading__best-time {\n  cursor: pointer;\n}\n\n.winners__car-image .car-image {\n  width: 50px;\n  height: 18px;\n}\n",""]);const s=i},767:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(81),a=n.n(r),o=n(645),i=n.n(o),s=n(667),c=n.n(s),d=new URL(n(369),n.b),l=new URL(n(879),n.b),u=new URL(n(765),n.b),g=i()(a()),h=c()(d),m=c()(l),p=c()(u);g.push([e.id,"@font-face {\n  font-family: 'Josefin';\n  src: url("+h+") format('woff2'),\n    url("+m+") format('woff'),\n    url("+p+") format('ttf');\n  font-weight: 400;\n}\n\n* {\n  box-sizing: border-box;\n}\n\nhtml {\n  scroll-behavior: smooth;\n}\n\n.body {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  max-width: 100%;\n  min-height: 100vh;\n  margin: 0;\n  padding: 0;\n  background-color: #202020;\n  font-family: Josefin, sans-serif;\n  font-weight: 400;\n  font-size: 16px;\n  text-align: left;\n  color: #f9f9f9;\n}\n",""]);const b=g},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var g=n(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==g)t[g].references++,t[g].updater(h);else{var m=a(h,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var c=r(e,a),d=0;d<o.length;d++){var l=n(o[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=c}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},765:(e,t,n)=>{e.exports=n.p+"0e82e3d2c82cf1e38a33.ttf"},879:(e,t,n)=>{e.exports=n.p+"af4e134a3d252c2c7aa5.woff"},369:(e,t,n)=>{e.exports=n.p+"523d20efc041487b4205.woff2"},681:(e,t,n)=>{e.exports=n.p+"e4648328ff5418a78b4a.svg"},471:(e,t,n)=>{e.exports=n.p+"ad178c0df28bc133be34.svg"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),a=n.n(r),o=n(569),i=n.n(o),s=n(565),c=n.n(s),d=n(216),l=n.n(d),u=n(589),g=n.n(u),h=n(767),m={};m.styleTagTransform=g(),m.setAttributes=c(),m.insert=i().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=l(),t()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals;var p=n(927),b={};b.styleTagTransform=g(),b.setAttributes=c(),b.insert=i().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=l(),t()(p.Z,b),p.Z&&p.Z.locals&&p.Z.locals;const _="http://127.0.0.1:3000",f="X-Total-Count",w="started",v="stopped",y="drive",C="wins",x="time",S="ASC",L="DESC";var A,E;!function(e){e[e.OK=200]="OK",e[e.NOT_FOUND=404]="NOT_FOUND"}(A||(A={})),function(e){e[e.zero=0]="zero",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.six=6]="six",e[e.thirty=30]="thirty",e[e.hundred=100]="hundred",e[e.thousand=1e3]="thousand"}(E||(E={}));const q="POST",T="DELETE",B={content:{"Content-Type":"application/json"}};var $;!function(e){e[e.seven=7]="seven",e[e.ten=10]="ten"}($||($={}));const P={title:"Async Race",githubAccount:"KosIrina",copyright:"Copyright | 2022",garage:"Garage",winners:"Winners",previous:"Previous",next:"Next",pageNumber:"Page #",create:"Create",update:"Update",race:"Race",reset:"Reset",generateRandomCars:"Generate Cars",select:"Select",remove:"Remove",startEngine:"A",stopEngine:"B",winnerNumber:"Number",winnerCar:"Car",winnerName:"Name",winnerWins:"Wins ·",winnerBestTime:"Best time (in seconds) ·",closeButton:"Close"},k="#",M="·",N="↑",W="↓";class R{drawBody(){const e=document.querySelector("body");e.classList.add("body");const t=document.createElement("header");t.classList.add("header"),e.append(t);const n=document.createElement("main");n.classList.add("main"),e.append(n);const r=document.createElement("footer");r.classList.add("footer"),e.append(r);const a=document.createElement("div");a.classList.add("winner-message");const o=document.createElement("p");o.classList.add("winner-message__text");const i=document.createElement("button");i.classList.add("winner-message__button"),i.innerHTML=P.closeButton,a.append(o,i),i.addEventListener("click",(()=>{o.textContent="",a.style.display="none"})),e.append(a)}drawHeader(){const e=document.querySelector(".header"),t=document.createElement("h1");t.classList.add("header__logo"),t.textContent=P.title,e.append(t)}drawFooter(){const e=document.querySelector(".footer"),t=document.createElement("a");t.classList.add("footer__github-link"),t.setAttribute("href","https://github.com/KosIrina"),t.textContent=P.githubAccount;const n=document.createElement("p");n.classList.add("footer__copyright"),n.textContent=P.copyright;const r=document.createElement("a");r.classList.add("footer__rss-link"),r.setAttribute("href","https://rs.school/js/"),e.append(t,n,r)}createButton(e,t){const n=document.createElement("button");return n.classList.add("button",e),n.textContent=t,n}drawPageChangeButtons(){const e=document.createElement("div");e.classList.add("main__page-change");const t=this.createButton("main__garage-button",P.garage);t.setAttribute("disabled","");const n=this.createButton("main__winners-button",P.winners);return e.append(t,n),e}drawPagination(e){const t=document.createElement("div");t.classList.add(`${e}__page-number-change`);const n=this.createButton(`${e}__previous-page-button`,P.previous),r=this.createButton(`${e}__next-page-button`,P.next);return n.setAttribute("disabled",""),r.setAttribute("disabled",""),t.append(n,r),t}drawMain(){const e=document.querySelector(".main"),t=document.createElement("div");t.classList.add("main__garage");const n=document.createElement("div");n.classList.add("main__winners");const r=this.drawPageChangeButtons();e.append(r,t,n)}createViewName(e,t){const n=document.createElement("h2");return n.classList.add(`${e.toLowerCase()}__heading`),+t===E.one?n.textContent=`${e} (${t} car)`:n.textContent=`${e} (${t} cars)`,n}createPageNumber(e,t){const n=document.createElement("p");return n.classList.add(`${e.toLowerCase()}__page-number`),n.textContent=`${P.pageNumber}${t}`,n}}var I=n(60),O={};O.styleTagTransform=g(),O.setAttributes=c(),O.insert=i().bind(null,"head"),O.domAPI=a(),O.insertStyleElement=l(),t()(I.Z,O),I.Z&&I.Z.locals&&I.Z.locals;var D=n(545),z={};z.styleTagTransform=g(),z.setAttributes=c(),z.insert=i().bind(null,"head"),z.domAPI=a(),z.insertStyleElement=l(),t()(D.Z,z),D.Z&&D.Z.locals&&D.Z.locals;var V=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class H{getCars(e,t=$.seven){return V(this,void 0,void 0,(function*(){const n=yield fetch(`${_}/garage?_page=${e}&_limit=${t}`);return{data:yield n.json(),carsTotal:n.headers.get(f)}}))}getCar(e){return V(this,void 0,void 0,(function*(){const t=yield fetch(`${_}/garage/${e}`);return yield t.json()}))}createCar(e){return V(this,void 0,void 0,(function*(){const t=yield fetch(`${_}/garage`,{method:q,body:JSON.stringify(e),headers:B.content});return yield t.json()}))}deleteCar(e){return V(this,void 0,void 0,(function*(){const t=yield fetch(`${_}/garage/${e}`,{method:T});return yield t.json()}))}updateCar(e,t){return V(this,void 0,void 0,(function*(){const n=yield fetch(`${_}/garage/${e}`,{method:"PUT",body:JSON.stringify(t),headers:B.content});return yield n.json()}))}}class j{operateEngine(e,t){return n=this,r=void 0,o=function*(){const n=yield fetch(`${_}/engine?id=${e}&status=${t}`,{method:"PATCH"});return n.status===A.OK?Object.assign({},yield n.json()):{success:!1}},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,s)}c((o=o.apply(n,r||[])).next())}));var n,r,a,o}}var U=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class G{constructor(){this.garage=new H}getWinners(e,t="",n="",r=$.ten){return U(this,void 0,void 0,(function*(){const a=yield fetch(`${_}/winners?_page=${e}&_limit=${r}&_sort=${t}&_order=${n}`),o=yield a.json();return{fullData:yield Promise.all(o.map((e=>U(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),yield this.garage.getCar(e.id))}))))),winnersTotal:a.headers.get(f)}}))}getWinner(e){return U(this,void 0,void 0,(function*(){const t=yield fetch(`${_}/winners/${e}`);return yield t.json()}))}createWinner(e){return U(this,void 0,void 0,(function*(){const t=yield fetch(`${_}/winners`,{method:q,body:JSON.stringify(e),headers:B.content});return yield t.json()}))}deleteWinner(e){return U(this,void 0,void 0,(function*(){const t=yield fetch(`${_}/winners/${e}`,{method:T});return yield t.json()}))}updateWinner(e,t){return U(this,void 0,void 0,(function*(){const n=yield fetch(`${_}/winners/${e}`,{method:"PUT",body:JSON.stringify(t),headers:B.content});return yield n.json()}))}getWinnerStatus(e){return U(this,void 0,void 0,(function*(){return(yield fetch(`${_}/winners/${e}`)).status}))}addWinnerInfo(e,t){return U(this,void 0,void 0,(function*(){if((yield this.getWinnerStatus(e))===A.NOT_FOUND)yield this.createWinner({id:e,wins:E.one,time:t});else{const n=yield this.getWinner(e);yield this.updateWinner(e,{wins:n.wins+E.one,time:t<n.time?t:n.time})}}))}}class F{constructor(){this.garage=new H,this.engine=new j,this.winners=new G}}var X=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class Z{constructor(){this.api=new F}getCurrentPage(e){return+document.querySelector(`.${e}__page-number`).textContent.split(k)[E.one]}getNextPage(e){return X(this,void 0,void 0,(function*(){const t=this.getCurrentPage(e);return yield this.api.garage.getCars(t+E.one)}))}updateTotalCars(e){return X(this,void 0,void 0,(function*(){const t=this.getCurrentPage(e.toLowerCase());return{headingElement:document.querySelector(".garage__heading"),totalCars:(yield this.api.garage.getCars(t)).carsTotal}}))}enableNextButton(e){return X(this,void 0,void 0,(function*(){const t=this.getCurrentPage(e.toLowerCase());let n;e===P.garage?(n=yield this.api.garage.getCars(t+E.one),n.data.length&&document.querySelector(".garage__next-page-button").removeAttribute("disabled")):(n=yield this.api.winners.getWinners(t+E.one),n.fullData.length&&document.querySelector(".winners__next-page-button").removeAttribute("disabled"))}))}disableNextButton(e){return X(this,void 0,void 0,(function*(){const t=this.getCurrentPage(e.toLowerCase());let n;e===P.garage?(n=yield this.api.garage.getCars(t+E.one),n.data.length||document.querySelector(".garage__next-page-button").setAttribute("disabled","")):(n=yield this.api.winners.getWinners(t+E.one),n.fullData.length||document.querySelector(".winners__next-page-button").setAttribute("disabled",""))}))}enablePreviousButton(e){this.getCurrentPage(e.toLowerCase())!==E.one&&(e===P.garage?document.querySelector(".garage__previous-page-button").removeAttribute("disabled"):document.querySelector(".winners__previous-page-button").removeAttribute("disabled"))}disablePreviousButton(e){this.getCurrentPage(e.toLowerCase())===E.one&&(e===P.garage?document.querySelector(".garage__previous-page-button").setAttribute("disabled",""):document.querySelector(".winners__previous-page-button").setAttribute("disabled",""))}}const J=n.p+"03294e885fbe102c651e.svg",K={animationId:{},winner:"",hasWinner:!1,winnerTime:E.zero,sortType:"",sortOrder:""};class Q{check(){const e=document.querySelector(".table-heading__wins-amount"),t=e.textContent,n=document.querySelector(".table-heading__best-time"),r=n.textContent;K.sortType===C?(n.textContent=`${r.slice(E.zero,r.length-E.one)}·`,K.sortOrder===S?e.textContent=`${t.slice(E.zero,t.length-E.one)}↑`:K.sortOrder===L&&(e.textContent=`${t.slice(E.zero,t.length-E.one)}↓`)):K.sortType===x&&(e.textContent=`${t.slice(E.zero,t.length-E.one)}·`,K.sortOrder===S?n.textContent=`${r.slice(E.zero,r.length-E.one)}↑`:K.sortOrder===L&&(n.textContent=`${r.slice(E.zero,r.length-E.one)}↓`))}}var Y=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class ee{constructor(){this.common=new R,this.commonController=new Z,this.api=new F,this.sort=new Q}activateWinnersNextPageButton(){document.querySelector(".winners__next-page-button").addEventListener("click",(()=>{const e=this.commonController.getCurrentPage(P.winners.toLowerCase());document.querySelector(".winners__heading").outerHTML="",document.querySelector(".winners__page-number").outerHTML="",document.querySelector(".winners__table-body").innerHTML="",this.drawWinnersContainer(e+E.one,K.sortType,K.sortOrder)}))}activateWinnersPreviousPageButton(){document.querySelector(".winners__previous-page-button").addEventListener("click",(()=>{const e=this.commonController.getCurrentPage(P.winners.toLowerCase());document.querySelector(".winners__heading").outerHTML="",document.querySelector(".winners__page-number").outerHTML="",document.querySelector(".winners__table-body").innerHTML="",this.drawWinnersContainer(e-E.one,K.sortType,K.sortOrder)}))}drawMainWinners(){const e=document.querySelector(".main__winners"),t=this.common.drawPagination(P.winners.toLowerCase()),n=this.createWinnersTableHeadingsAndBody();e.append(n,t),this.activateWinnersNextPageButton(),this.activateWinnersPreviousPageButton()}createWinnersTableHeadingsAndBody(){const e=document.createElement("table");e.classList.add("winners__table");const t=document.createElement("thead");t.classList.add("winners__table-heading");const n=document.createElement("tbody");n.classList.add("winners__table-body");const r=document.createElement("tr"),a=document.createElement("th");a.classList.add("cell-heading","table-heading__number"),a.textContent=P.winnerNumber;const o=document.createElement("th");o.classList.add("cell-heading","table-heading__car-image"),o.textContent=P.winnerCar;const i=document.createElement("th");i.classList.add("cell-heading","table-heading__car-name"),i.textContent=P.winnerName;const s=document.createElement("th");s.classList.add("cell-heading","table-heading__wins-amount"),s.textContent=P.winnerWins;const c=document.createElement("th");return c.classList.add("cell-heading","table-heading__best-time"),c.textContent=P.winnerBestTime,r.append(a,o,i,s,c),t.append(r),e.append(t,n),s.addEventListener("click",(()=>{this.sortByWins()})),c.addEventListener("click",(()=>{this.sortByTime()})),e}createWinnerTableRow(e,t,n,r,a,o){const i=document.createElement("tr");i.classList.add("winners__row"),i.dataset.carId=`${o}`;const s=i.insertCell(E.zero);s.textContent=`${e}`;const c=i.insertCell(E.one),d=document.createElement("div");d.classList.add("winners__car-image"),d.innerHTML=`<svg class="car-image" fill="${t}"><use xlink:href="${J}#car-image"></use></svg>`,c.append(d);const l=i.insertCell(E.two);l.classList.add("winner-name"),l.textContent=`${n}`;const u=i.insertCell(E.three);u.classList.add("winner-wins"),u.textContent=`${r}`;const g=i.insertCell(E.four);return g.classList.add("winner-best-time"),g.textContent=`${a}`,[s,c,l,u,g].forEach((e=>{e.classList.add("cell-content")})),i}sortByWins(){return Y(this,void 0,void 0,(function*(){const e=document.querySelector(".table-heading__wins-amount").textContent.slice(-E.one);if(e===M||e===W){K.sortType=C,K.sortOrder=S;const e=this.commonController.getCurrentPage(P.winners.toLowerCase());yield this.drawSortedWinners(e,C,S),this.sort.check()}else if(e===N){K.sortType=C,K.sortOrder=L;const e=this.commonController.getCurrentPage(P.winners.toLowerCase());yield this.drawSortedWinners(e,C,L),this.sort.check()}return K}))}sortByTime(){return Y(this,void 0,void 0,(function*(){const e=document.querySelector(".table-heading__best-time").textContent.slice(-E.one);if(e===M||e===W){K.sortType=x,K.sortOrder=S;const e=this.commonController.getCurrentPage(P.winners.toLowerCase());yield this.drawSortedWinners(e,x,S),this.sort.check()}else if(e===N){K.sortType=x,K.sortOrder=L;const e=this.commonController.getCurrentPage(P.winners.toLowerCase());yield this.drawSortedWinners(e,x,L),this.sort.check()}return K}))}drawWinnersContainer(e,t,n){return Y(this,void 0,void 0,(function*(){const r=document.querySelector(".main__winners"),a=yield this.api.winners.getWinners(e,t,n),o=this.common.createViewName(P.winners,a.winnersTotal),i=this.common.createPageNumber(P.winners,e);let s;s=e===E.one?E.one:$.ten*(e-E.one)+E.one;const c=document.querySelector(".winners__table-body");a.fullData.forEach((e=>{const t=this.createWinnerTableRow(s,e.color,e.name,e.wins,e.time,e.id);c.append(t),s+=E.one})),r.prepend(o,i),this.commonController.enableNextButton(P.winners),this.commonController.disableNextButton(P.winners),this.commonController.disablePreviousButton(P.winners),this.commonController.enablePreviousButton(P.winners)}))}drawSortedWinners(e,t,n){return Y(this,void 0,void 0,(function*(){const r=yield this.api.winners.getWinners(e,t,n);let a;a=e===E.one?E.one:$.ten*(e-E.one)+E.one;const o=document.querySelector(".winners__table-body");o.innerHTML="",r.fullData.forEach((e=>{const t=this.createWinnerTableRow(a,e.color,e.name,e.wins,e.time,e.id);o.append(t),a+=E.one})),this.commonController.enableNextButton(P.winners),this.commonController.disableNextButton(P.winners),this.commonController.disablePreviousButton(P.winners),this.commonController.enablePreviousButton(P.winners)}))}}class te{getElementPosition(e){const{left:t,width:n}=e.getBoundingClientRect();return{x:t+n/E.two}}getDistanceBetweenElements(e,t){const n=this.getElementPosition(e);return this.getElementPosition(t).x-n.x}animateCar(e,t,n){let r=E.zero;const a=e,o=a.closest(".garage__car").getAttribute("data-car-id");return K.animationId[o]=window.requestAnimationFrame((function e(i){r||(r=i);const s=i-r,c=Math.round(s*(t/n));a.style.transform=`translateX(${Math.min(c,t)}px)`,c<t&&(K.animationId[o]=window.requestAnimationFrame(e))})),K}}var ne=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class re{constructor(){this.api=new F,this.appController=new Z,this.appView=new R,this.animation=new te}editCar(e,t,n){const r=document.querySelector(".car-update__name"),a=document.querySelector(".car-update__color"),o=document.querySelector(".car-update__button");r.removeAttribute("disabled"),r.value=`${e}`,a.removeAttribute("disabled"),a.value=`${t}`,o.removeAttribute("disabled"),o.dataset.carId=`${n}`}saveEditedCar(){const e=document.querySelector(".car-update__name"),t=document.querySelector(".car-update__color"),n=document.querySelector(".car-update__button");e.setAttribute("disabled",""),e.value="",t.setAttribute("disabled",""),t.value="#000000",n.setAttribute("disabled","")}removeCar(e){return ne(this,void 0,void 0,(function*(){document.querySelector(`.garage__car[data-car-id="${e}"]`).remove();const t=yield this.appController.updateTotalCars(P.garage);t.headingElement.innerHTML=`${this.appView.createViewName(P.garage,t.totalCars).innerHTML}`}))}updateButtonsStatesDuringRace(e){const t=document.querySelector(`.garage__car[data-car-id="${e}"]`);t.querySelector(".garage__car-start-engine-button").setAttribute("disabled",""),t.querySelector(".garage__car-select-button").setAttribute("disabled",""),t.querySelector(".garage__car-remove-button").setAttribute("disabled",""),document.querySelector(".car-creation__button").setAttribute("disabled",""),document.querySelector(".controller-buttons__race").setAttribute("disabled",""),document.querySelector(".controller-buttons__generate-cars").setAttribute("disabled",""),document.querySelector(".garage__previous-page-button").setAttribute("disabled",""),document.querySelector(".garage__next-page-button").setAttribute("disabled","")}updateButtonsStatesAfterStop(e){const t=document.querySelector(`.garage__car[data-car-id="${e}"]`);t.querySelector(".garage__car-start-engine-button").removeAttribute("disabled"),t.querySelector(".garage__car-stop-engine-button").setAttribute("disabled",""),t.querySelector(".garage__car-select-button").removeAttribute("disabled"),t.querySelector(".garage__car-remove-button").removeAttribute("disabled"),document.querySelector(".car-creation__button").removeAttribute("disabled"),document.querySelector(".controller-buttons__race").removeAttribute("disabled"),document.querySelector(".controller-buttons__generate-cars").removeAttribute("disabled"),this.appController.enableNextButton(P.garage),this.appController.disableNextButton(P.garage),this.appController.enablePreviousButton(P.garage),this.appController.disablePreviousButton(P.garage)}activateStartCarButton(e){return ne(this,void 0,void 0,(function*(){const{velocity:t,distance:n}=yield this.api.engine.operateEngine(e,w),r=Math.round(n/t),a=document.querySelector(`.garage__car[data-car-id="${e}"]`),o=a.querySelector(".garage__car-image"),i=a.querySelector(".garage__flag-image"),s=Math.floor(this.animation.getDistanceBetweenElements(o,i))+E.thirty;this.updateButtonsStatesDuringRace(e),this.animation.animateCar(o,s,r);const{success:c}=yield this.api.engine.operateEngine(e,y);c||window.cancelAnimationFrame(+K.animationId[e]),a.querySelector(".garage__car-stop-engine-button").removeAttribute("disabled")}))}activateStopCarButton(e){return ne(this,void 0,void 0,(function*(){yield this.api.engine.operateEngine(e,v),document.querySelector(`.garage__car[data-car-id="${e}"]`).querySelector(".garage__car-image").style.transform=`translateX(${E.zero})`,this.updateButtonsStatesAfterStop(e)}))}activateRaceButton(){return ne(this,void 0,void 0,(function*(){const e=document.querySelector(".garage__page-number").textContent,t=yield this.api.garage.getCars(+e.split(k)[E.one]);return yield Promise.all(t.data.map((e=>ne(this,void 0,void 0,(function*(){const{velocity:t,distance:n}=yield this.api.engine.operateEngine(e.id,w),r=Math.round(n/t),a=document.querySelector(`.garage__car[data-car-id="${e.id}"]`),o=a.querySelector(".garage__car-image"),i=a.querySelector(".garage__flag-image"),s=Math.floor(this.animation.getDistanceBetweenElements(o,i))+E.thirty;this.updateButtonsStatesDuringRace(e.id),this.animation.animateCar(o,s,r);const{success:c}=yield this.api.engine.operateEngine(e.id,y);c||window.cancelAnimationFrame(+K.animationId[e.id]),c&&!K.hasWinner&&(K.winner=yield this.api.garage.getCar(e.id),K.hasWinner=!0,K.winnerTime+=r)}))))),document.querySelector(".controller-buttons__reset").removeAttribute("disabled"),K}))}activateResetButton(){return ne(this,void 0,void 0,(function*(){const e=+document.querySelector(".garage__page-number").textContent.split(k)[E.one];(yield this.api.garage.getCars(e)).data.forEach((e=>ne(this,void 0,void 0,(function*(){yield this.api.engine.operateEngine(e.id,v),document.querySelector(`.garage__car[data-car-id="${e.id}"]`).querySelector(".garage__car-image").style.transform=`translateX(${E.zero})`,this.updateButtonsStatesAfterStop(e.id)})))),document.querySelector(".controller-buttons__reset").setAttribute("disabled","")}))}}var ae=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class oe{constructor(){this.api=new F,this.winners=new ee,this.appController=new Z,this.sort=new Q}updateWinnersPage(e,t){return ae(this,void 0,void 0,(function*(){const n=this.appController.getCurrentPage(P.winners.toLowerCase());document.querySelector(".main__winners").innerHTML="",this.winners.drawMainWinners(),yield this.winners.drawWinnersContainer(n,e,t)}))}removeCar(e,t,n){return ae(this,void 0,void 0,(function*(){yield this.api.winners.deleteWinner(+e),this.updateWinnersPage(t,n),this.sort.check()}))}}const ie=n.p+"c00b518d1be6f9f5da75.png";var se=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class ce{constructor(){this.common=new R,this.winners=new ee,this.api=new F,this.garageController=new re,this.winnersController=new oe,this.appController=new Z}createInput(e,t,n){const r=document.createElement("input");return r.classList.add(e),r.setAttribute("id",t),r.setAttribute("type",n),r.addEventListener("keydown",(e=>{"Enter"===e.code&&e.preventDefault()})),r}drawCarCreation(){const e=document.createElement("form");e.classList.add("garage__car-creation");const t=this.createInput("car-creation__name","adding-car-name","text"),n=this.createInput("car-creation__color","adding-car-color","color"),r=this.common.createButton("car-creation__button",P.create);return r.setAttribute("type","button"),e.append(t,n,r),e}drawCarUpdate(){const e=document.createElement("form");e.classList.add("garage__car-update");const t=this.createInput("car-update__name","updating-car-name","text");t.setAttribute("disabled","");const n=this.createInput("car-update__color","updating-car-color","color");n.setAttribute("disabled","");const r=this.common.createButton("car-update__button",P.update);return r.setAttribute("type","button"),r.setAttribute("disabled",""),e.append(t,n,r),e}drawMainControllerButtons(){const e=document.createElement("div");e.classList.add("garage__controller-buttons");const t=this.common.createButton("controller-buttons__race",P.race),n=this.common.createButton("controller-buttons__reset",P.reset);n.setAttribute("disabled","");const r=this.common.createButton("controller-buttons__generate-cars",P.generateRandomCars);return e.append(t,n,r),e}drawGarageController(){const e=document.createElement("div");e.classList.add("garage__controller");const t=this.drawCarCreation(),n=this.drawCarUpdate(),r=this.drawMainControllerButtons();return e.append(t,n,r),e}drawMainGarage(){const e=document.querySelector(".main__garage"),t=this.drawGarageController(),n=this.common.drawPagination(P.garage.toLowerCase());e.append(t,n)}createEditButtonsAndNameContainer(e){const t=document.createElement("div");t.classList.add("garage__car-edit-buttons-and-name");const n=this.common.createButton("garage__car-select-button",P.select);n.addEventListener("click",(()=>se(this,void 0,void 0,(function*(){const e=n.closest(".garage__car").getAttribute("data-car-id"),t=yield this.api.garage.getCar(+e);this.garageController.editCar(t.name,t.color,t.id)}))));const r=this.common.createButton("garage__car-remove-button",P.remove);r.addEventListener("click",(()=>se(this,void 0,void 0,(function*(){const e=r.closest(".garage__car").getAttribute("data-car-id"),t=yield this.appController.getNextPage(P.garage.toLowerCase());t.data.length&&this.drawNewCar(t.data[E.zero].id),yield this.api.garage.deleteCar(+e),this.garageController.removeCar(e),this.winnersController.removeCar(e,K.sortType,K.sortOrder),this.appController.disableNextButton(P.garage)}))));const a=document.createElement("span");return a.classList.add("garage__car-name"),a.textContent=`${e}`,t.append(n,r,a),t}createDriveButtonsAndCarContainer(e){const t=document.createElement("div");t.classList.add("garage__drive-buttons-and-car");const n=this.common.createButton("garage__car-start-engine-button",P.startEngine),r=this.common.createButton("garage__car-stop-engine-button",P.stopEngine);r.setAttribute("disabled","");const a=document.createElement("div");a.classList.add("garage__car-image"),a.innerHTML=`<svg class="car-image" fill="${e}"><use xlink:href="${J}#car-image"></use></svg>`;const o=document.createElement("img");return o.classList.add("garage__flag-image"),o.setAttribute("src",ie),t.append(n,r,a,o),t}createCarContainer(e,t,n){const r=document.createElement("div");r.classList.add("garage__car"),r.dataset.carId=`${e}`;const a=this.createEditButtonsAndNameContainer(t),o=this.createDriveButtonsAndCarContainer(n);return r.append(a,o),r}drawGarageContainer(e){return se(this,void 0,void 0,(function*(){const t=document.createElement("div");t.classList.add("garage__container");const n=document.querySelector(".garage__controller"),r=yield this.api.garage.getCars(e),a=this.common.createViewName(P.garage,r.carsTotal),o=this.common.createPageNumber(P.garage,e),i=document.createElement("div");i.classList.add("garage__cars"),r.data.forEach((e=>{const t=this.createCarContainer(e.id,e.name,e.color);i.append(t),t.querySelector(".garage__car-start-engine-button").addEventListener("click",(()=>{this.garageController.activateStartCarButton(e.id)})),t.querySelector(".garage__car-stop-engine-button").addEventListener("click",(()=>{this.garageController.activateStopCarButton(e.id)}))})),t.append(a,o,i),n.after(t),this.appController.disableNextButton(P.garage),this.appController.enableNextButton(P.garage),this.appController.disablePreviousButton(P.garage),this.appController.enablePreviousButton(P.garage)}))}drawNewCar(e){return se(this,void 0,void 0,(function*(){const t=document.querySelector(".garage__cars"),n=yield this.api.garage.getCar(e),r=this.createCarContainer(n.id,n.name,n.color);t.append(r),r.querySelector(".garage__car-start-engine-button").addEventListener("click",(()=>{this.garageController.activateStartCarButton(n.id)})),r.querySelector(".garage__car-stop-engine-button").addEventListener("click",(()=>{this.garageController.activateStopCarButton(n.id)}))}))}}const de=["Acura","Alfa Romeo","Alpine","Apollo","Apple","Aston Martin","Audi","Automobili Pininfarina","Bentley","BMW","Bollinger","Brilliance","Bugatti","Buick","BYD","Cadillac","Chana","Chery","Chevrolet","Chrysler","Citroen","Continental","CUPRA","Dacia","Daewoo","Daihatsu","Datsun","Detroit Electric","Dodge","DS Automobiles","FAW","Ferrari","Fiat","Fisker","Ford","Foxtron","Geely","Genesis","GMC","Great Wall","Haval","Honda","Hummer","Hyundai","Ineos","Infiniti","Iran Khodro","JAC","Jaguar","Jeep","JETOUR","KIA","Koenigsegg","Lada","Lamborghini","Lancia","Land Rover","Lexus","Lifan","Lincoln","Lordstown","Lotus","Lucid","LvChi","Lynk & Co","Maserati","Maybach","Mazda","MCLaren","Mercedes-Benz","MG","MINI","Mitsubishi","Nikola","NIO","Nissan","Opel","Pagani","Peugeot","Polestar","Porsche","Qoros","Range Rover","Ravon","Renault","Rimac","Rivian","Rolls-Royce","Saab","Saipa","SEAT","Skoda","SsangYong","SSC North America","Stellantis","Subaru","Suzuki","Tata","Tesla","Torsus","Toyota","VinFast","Volkswagen","Volvo","Xpeng","Zotye"],le=["Durango","Ram","Challenger","Charger","Grand Caravan","X7","X5","X3","X6 M","X6","X1","X4","C3 Aircross","C5 Aircross","Duster","CR-V","Corolla","C4Cactus","DS3 Crossback","C1","C3","Berlingo Multispace","DS4 Crossback","UX 250h","NX 300h","LC 500","RX 350/200t","Rapid","Largus","IS 200t","LS 500h","RX","ES 200/250/350","Hatchback","CX-5","Sedan","CX-30","CX-9","CX-3","MX-5 Roadster","Phantom","Camry","Polo","Cullinan","Ghost","Dawn","Duster","Arkana","Sandero","Logan","Trafic Fourgon","Logan MCV","Captur","Kadjar","RAV4","Rio","Creta","Solaris"];class ue{generateRandomCarName(){return`${de[Math.floor(Math.random()*de.length)]} ${le[Math.floor(Math.random()*le.length)]}`}generateRandomCarColor(){const e="0123456789abcdef";let t=k;for(let n=E.zero;n<E.six;n+=1)t+=e[Math.floor(Math.random()*e.length)];return t}generateRandomCars(){return new Array(E.hundred).fill(E.zero).map((()=>({name:this.generateRandomCarName(),color:this.generateRandomCarColor()})))}}class ge{getTaskCheck(){console.log('Самооценка: все пункты задания выполнены – 190 баллов\n\n\n(+5) There should be two views on the site: "Garage" and "Winners".\n(+5) "Garage" view should contain its name, page number, and the full amount of items in the database (how many car user has in his garage).\n(+5) "Winners" view should contain its name, page number, and the full amount of items in the database (how many records the winners table contains).\n(+10) View state should be saved when user switches from one view to another. For example, page number shouldn\'t be reset, input controls should contain that they contained before switching, etc.\n(+15) User should be able to create, update, delete a car, and see the list of the cars. Car has only two attributes: "name" and "color". For "delete"-operation car should be deleted from "garage" table as well as from "winners".\n(+10) User should be able to select any color from an RGB-Palete like here and see the picture of the car colored with the color selected and car\'s name.\n(+5) Near the car\'s picture should be buttons to update its attributes or delete it.\n(+10) There should be pagination on the "Garage" view (7 cars per one page).\n(+10) There should be a button to create random cars (100 cars per click). Name should be assembled from two random parts, for example "Tesla" + "Model S", or "Ford" + "Mustang" (At least 10 different names for each part). Color should be also generated randomly.\n(+5) Near the car\'s picture should be buttons for starting / stoping the car engine.\n(+20) User clicks to the engine start button -> UI is waiting for car\'s velocity answer -> animate the car and makes another request to drive. In case api returned 500 error car animation should be stopped.\n(+5) User clicks to the engine stop button -> UI is waiting for answer for stopping engine -> car returned to it\'s initial place.\n(+5) Start engine button should be disabled in case car is already in driving mode. As well as stop engine button should be disabled when car is on it\'s initial place.\n(+15) Car animation should work fine on any screen (smallest screen size is 500px).\n(+10) There should be a button to start race. After user clicks this button all the cars on the current page start driving.\n(+10) There should be a button to reset race. After user clicks this button all the cars return to it\'s initial places.\n(+10) After some car finishes first user should see the message contains car\'s name that shows which one has won.\n(+10) After some car wins it should be displayed at the "Winners view" table.\n(+5) There should be pagination (10 winners per one page).\n(+10) Table should include the next culumns: "№", "Image of the car", "Name of the car", "Wins number", "Best time in seconds" (names of the columns can differ). If the same car wins more than once the number of wins should be incremented while best time should be saved only if it\'s better than the stored one.\n(+10) User should be able to sort cars by wins number and by best time (ASC, DESC).')}}var he=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};(new class{constructor(){this.appView=new R,this.garageView=new ce,this.garageController=new re,this.appController=new Z,this.winnersController=new oe,this.winnersView=new ee,this.api=new F,this.randomizer=new ue,this.taskCheck=new ge,this.sort=new Q}drawMainElements(){this.appView.drawBody(),this.appView.drawHeader(),this.appView.drawFooter(),this.appView.drawMain(),this.garageView.drawMainGarage(),this.winnersView.drawMainWinners()}activateSwitchToWinners(){document.querySelector(".main__winners-button").addEventListener("click",(()=>{document.querySelector(".main__winners").style.display="block",document.querySelector(".main__garage").style.display="none",document.querySelector(".main__winners-button").setAttribute("disabled",""),document.querySelector(".main__garage-button").removeAttribute("disabled")}))}activateSwitchToGarage(){document.querySelector(".main__garage-button").addEventListener("click",(()=>{document.querySelector(".main__winners").style.display="none",document.querySelector(".main__garage").style.display="block",document.querySelector(".main__garage-button").setAttribute("disabled",""),document.querySelector(".main__winners-button").removeAttribute("disabled")}))}activateCarCreation(){document.querySelector(".car-creation__button").addEventListener("click",(()=>he(this,void 0,void 0,(function*(){const e=document.querySelector(".car-creation__name").value,t=document.querySelector(".car-creation__color").value,n=yield this.api.garage.createCar({name:e,color:t}),r=yield this.appController.updateTotalCars(P.garage);r.headingElement.innerHTML=`${this.appView.createViewName(P.garage,r.totalCars).innerHTML}`,document.querySelectorAll(".garage__car").length<$.seven&&this.garageView.drawNewCar(n.id),this.appController.enableNextButton(P.garage)}))))}activateCarUpdate(){document.querySelector(".car-update__button").addEventListener("click",(e=>he(this,void 0,void 0,(function*(){const t=e.target.getAttribute("data-car-id"),n=document.querySelector(".car-update__name").value,r=document.querySelector(".car-update__color").value;yield this.api.garage.updateCar(+t,{name:n,color:r}),this.garageController.saveEditedCar();const a=document.querySelector(`.garage__car[data-car-id="${t}"]`);a.querySelector(".garage__car-name").textContent=`${n}`,a.querySelector(".car-image").setAttribute("fill",`${r}`);const o=document.querySelector(`.winners__row[data-car-id="${t}"]`);o&&(o.querySelector(".winner-name").textContent=`${n}`,o.querySelector(".car-image").setAttribute("fill",`${r}`))}))))}activateRandomCarsGeneration(){document.querySelector(".controller-buttons__generate-cars").addEventListener("click",(()=>he(this,void 0,void 0,(function*(){const e=this.randomizer.generateRandomCars(),t=yield Promise.all(e.map((e=>he(this,void 0,void 0,(function*(){return Object.assign({},yield this.api.garage.createCar(e))})))));t.sort(((e,t)=>e.id-t.id));const n=yield this.appController.updateTotalCars(P.garage);n.headingElement.innerHTML=`${this.appView.createViewName(P.garage,n.totalCars).innerHTML}`;const r=document.querySelectorAll(".garage__car").length;if(r<$.seven){const e=$.seven-r;for(let n=E.zero;n<e;n+=E.one)this.garageView.drawNewCar(t[n].id)}this.appController.enableNextButton(P.garage)}))))}activateGaragePageSwitch(){document.querySelector(".garage__next-page-button").addEventListener("click",(()=>{const e=this.appController.getCurrentPage(P.garage.toLowerCase());document.querySelector(".garage__container").outerHTML="",this.garageView.drawGarageContainer(e+E.one)})),document.querySelector(".garage__previous-page-button").addEventListener("click",(()=>{const e=this.appController.getCurrentPage(P.garage.toLowerCase());document.querySelector(".garage__container").outerHTML="",this.garageView.drawGarageContainer(e-E.one)}))}activateRaceAndReset(){document.querySelector(".controller-buttons__race").addEventListener("click",(()=>he(this,void 0,void 0,(function*(){K.winner="",K.hasWinner=!1,K.winnerTime=E.zero;const e=yield this.garageController.activateRaceButton(),t=e.winner;yield this.api.winners.addWinnerInfo(t.id,e.winnerTime/E.thousand),document.querySelector(".winner-message").style.display="flex",document.querySelector(".winner-message__text").textContent=`${t.name} went first (${e.winnerTime/E.thousand} seconds)!`,this.winnersController.updateWinnersPage(K.sortType,K.sortOrder),this.sort.check()})))),document.querySelector(".controller-buttons__reset").addEventListener("click",(()=>{this.garageController.activateResetButton()}))}start(){this.taskCheck.getTaskCheck(),this.drawMainElements(),this.garageView.drawGarageContainer(E.one),this.winnersView.drawWinnersContainer(E.one),this.activateSwitchToGarage(),this.activateSwitchToWinners(),this.activateCarCreation(),this.activateCarUpdate(),this.activateRandomCarsGeneration(),this.activateGaragePageSwitch(),this.activateRaceAndReset()}}).start()})()})();